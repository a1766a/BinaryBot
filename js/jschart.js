var ws,token,market,tf,curency,lastOpenTime,barrier,barrier2,lastRefNumber,transactionId,buyPrice,sellPrice,profitLoss,payout,longCode,shortCode,purchaseTime,shellTime,entrySpot,exitSpot,isSold,isExpire,isAllowSell,tradeStatus,dateExpired,url="wss://ws.binaryws.com/websockets/v3?app_id=12575&l=EN",lastReqTime=0,newReqTime=0,counterTime=0,isLive=!1,OnTrade=!1,signalTrading="NETRAL",lastStake=0,contractId=0,tradeResult=1,lastSignal="NETRAL",isNewBar=!1,pattern=[],candles_o=[],candles_h=[],candles_l=[],candles_c=[],ticker=[];function showAlert(a,r){$("#confirmtitle").html(a),$("#confirmbody").html(r),$("#myModal").modal("toggle")}function CheckStatus(){setInterval(function(){lastReqTime>0?newReqTime!=lastReqTime?(newReqTime=lastReqTime,counterTime=0):counterTime++:counterTime=0,counterTime>10&&(isLive=!1,counterTime=0,navigator.onLine&&Init())},1e3)}function TradeMonitor(){setInterval(function(){if(0==OnTrade&&"NETRAL"!=signalTrading)switch(OnTrade=!0,lastSignal=signalTrading,signalTrading="NETRAL",$("#buyprice").html(""),$("#longcode").html(""),$("#refnumber").html(""),$("#payout").html(""),$("#entryspot").html(""),$("#purchasetime").html(""),$("#indicative").html(""),$("#profitloss").html(""),$("#traderesult").html(""),lastStake=1==tradeResult?parseFloat($("#stake").val()).toFixed(2):(parseFloat(lastStake)*parseFloat($("#multiplier").val())).toFixed(2),parseFloat(lastStake)>=parseFloat($("#maxstake").val())&&(lastStake=$("#maxstake").val().toFixed(2)),$("#contract").val()){case"RF":switch($("#signaltotrade").val()){case"all":"follow"==$("#signaldirection").val()?BuyContractNoBarrier(lastStake,"UP"==lastSignal?"CALL":"PUT",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val()):BuyContractNoBarrier(lastStake,"UP"==lastSignal?"PUT":"CALL",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val());break;case"up":"UP"==lastSignal&&BuyContractNoBarrier(lastStake,"CALL",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val());break;case"down":"DOWN"==lastSignal&&BuyContractNoBarrier(lastStake,"PUT",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val())}break;case"HLL":switch($("#signaltotrade").val()){case"all":"follow"==$("#signaldirection").val()?"UP"==lastSignal?(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"CALL",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier)):(barrier="+"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"PUT",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier)):"UP"==lastSignal?(barrier="+"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"PUT",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier)):(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"CALL",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier));break;case"up":"UP"==lastSignal&&(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"CALL",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier));break;case"down":"DOWN"==lastSignal&&(barrier="+"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"PUT",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier))}break;case"HLH":switch($("#signaltotrade").val()){case"all":"follow"==$("#signaldirection").val()?"UP"==lastSignal?(barrier="+"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"CALL",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier)):(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"PUT",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier)):"UP"==lastSignal?(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"PUT",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier)):(barrier="+"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"CALL",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier));break;case"up":"UP"==lastSignal&&(barrier="+"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"CALL",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier));break;case"down":"DOWN"==lastSignal&&(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"PUT",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier))}break;case"TCH":switch($("#signaltotrade").val()){case"all":"follow"==$("#signaldirection").val()?"UP"==lastSignal?(barrier="+"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"ONETOUCH",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier)):(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"ONETOUCH",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier)):"UP"==lastSignal?(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"ONETOUCH",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier)):(barrier="+"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"ONETOUCH",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier));break;case"up":"UP"==lastSignal&&(barrier="+"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"ONETOUCH",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier));break;case"down":"DOWN"==lastSignal&&(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"ONETOUCH",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier))}break;case"DNT":switch($("#signaltotrade").val()){case"all":$("#signaldirection").val(),"UP"==lastSignal?(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"NOTOUCH",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier)):(barrier="+"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"NOTOUCH",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier));break;case"up":"follow"==$("#signaldirection").val()&&"UP"==lastSignal&&(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"NOTOUCH",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier));break;case"down":"follow"==$("#signaldirection").val()&&"DOWN"==lastSignal&&(barrier="-"+$("#barrier1").val(),BuyContractSingleBarrier(lastStake,"NOTOUCH",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier))}break;case"EBW":switch($("#signaltotrade").val()){case"all":if("follow"==$("#signaldirection").val())if("UP"==lastSignal){var a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)<parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"EXPIRYRANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else{a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+r,barrier2="-"+a,parseFloat(a)>parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"EXPIRYRANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else if("DOWN"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)<parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"EXPIRYRANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else{a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+r,barrier2="-"+a,parseFloat(a)>parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"EXPIRYRANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}break;case"up":if("UP"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)<parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"EXPIRYRANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}break;case"down":if("DOWN"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+r,barrier2="-"+a,parseFloat(a)>parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"EXPIRYRANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}}break;case"EOS":switch($("#signaltotrade").val()){case"all":if("follow"==$("#signaldirection").val())if("UP"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)>parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"EXPIRYMISS",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else{a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+r,barrier2="-"+a,parseFloat(a)>parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"EXPIRYMISS",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else if("DOWN"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)>parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"EXPIRYMISS",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else{a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+r,barrier2="-"+a,parseFloat(a)>parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"EXPIRYMISS",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}break;case"up":if("UP"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)>parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"EXPIRYMISS",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}break;case"down":if("DOWN"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+r,barrier2="-"+a,parseFloat(a)>parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"EXPIRYMISS",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}}break;case"SBW":switch($("#signaltotrade").val()){case"all":if("follow"==$("#signaldirection").val())if("UP"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)<parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"RANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else{a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)<parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"RANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else if("DOWN"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)<parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"RANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else{a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)<parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"RANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}break;case"up":if("UP"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)<parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"RANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}break;case"down":if("DOWN"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)<parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"RANGE",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}}break;case"GO":switch($("#signaltotrade").val()){case"all":if("follow"==$("#signaldirection").val())if("UP"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)>parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"UPORDOWN",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else{a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)>parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"UPORDOWN",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else if("DOWN"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)>parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"UPORDOWN",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}else{a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)>parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"UPORDOWN",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}break;case"up":if("UP"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)>parseFloat(r)&&(barrier1="+"+r,barrier2="-"+a),BuyContractMultiBarrier(lastStake,"UPORDOWN",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}break;case"down":if("DOWN"==lastSignal){a=$("#barrier1").val(),r=$("#barrier2").val();barrier1="+"+a,barrier2="-"+r,parseFloat(a)>parseFloat(r)&&(barrier1="+"+a,barrier2="-"+r),BuyContractMultiBarrier(lastStake,"UPORDOWN",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val(),barrier,barrier2)}}break;case"AS":switch($("#signaltotrade").val()){case"all":"follow"==$("#signaldirection").val()?BuyContractNoBarrier(lastStake,"UP"==lastSignal?"ASIANU":"ASIAND",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val()):BuyContractNoBarrier(lastStake,"UP"==lastSignal?"ASIAND":"ASIANU",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val());break;case"up":"UP"==lastSignal&&BuyContractNoBarrier(lastStake,"ASIANU",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val());break;case"down":"DOWN"==lastSignal&&BuyContractNoBarrier(lastStake,"ASIAND",$("#duration").val(),$("#duration-unit").val(),$("#symbol").val())}}},500)}function Tick_History(){var a={ticks_history:market,end:"latest",style:"candles",granularity:tf,count:60,subscribe:1};ws.send(JSON.stringify(a))}function GetSettings(){ws.send(JSON.stringify({get_settings:1}))}function Authorize(){var a={authorize:token};ws.send(JSON.stringify(a))}function Forget_all_spot(){ws.send(JSON.stringify({forget_all:["ticks","candles"]}))}function ActiveSymbol(){ws.send(JSON.stringify({active_symbols:"full",product_type:"basic",landing_company:"costarica"}))}function Forget_all_price_proposal(){ws.send(JSON.stringify({forget_all:["proposal","proposal_array","proposal_open_contract","transaction","portfolio"]}))}function SellExpireContract(){ws.send(JSON.stringify({sell_expired:1}))}function SellContract(){if(0!=contractId&&1==isAllowSell){var a={sell:contractId,price:0};ws.send(JSON.stringify(a))}}function BuyContractNoBarrier(a,r,e,t,l){var i={buy:1,price:a,parameters:{amount:a,basis:"stake",contract_type:r,currency:curency,duration:e,duration_unit:t,symbol:l}};ws.send(JSON.stringify(i))}function BuyContractMultiBarrier(a,r,e,t,l,i,o){var s={buy:1,price:a,parameters:{amount:a,basis:"stake",contract_type:r,currency:curency,duration:e,duration_unit:t,symbol:l,barrier:i,barrier2:o}};ws.send(JSON.stringify(s))}function BuyContractSingleBarrier(a,r,e,t,l,i){var o={buy:1,price:a,parameters:{amount:a,basis:"stake",contract_type:r,currency:curency,duration:e,duration_unit:t,symbol:l,barrier:i}};ws.send(JSON.stringify(o))}function ProposalOpenContract(){var a={proposal_open_contract:1,contract_id:contractId,subscribe:1};ws.send(JSON.stringify(a))}function Init(){(ws=new WebSocket(url)).onmessage=function(a){var r=JSON.parse(a.data);switch(r.msg_type){case"authorize":if(r.hasOwnProperty("error"))showAlert("Warrning",r.error.message);else{$("#splash").hide(),$("#utama").show();var e=" "==r.authorize.fullname?r.authorize.fullname:"Virtual Account";$("#fullname").html(e),$("#email").html(r.authorize.email),$("#balance").html(r.authorize.balance),$("#loginid").html(r.authorize.loginid),$("#curency").html(r.authorize.currency),curency=r.authorize.currency;for(var t=r.authorize.scopes,l="",i=0;i<t.length;i++)l=0==i?capitalizeFirstLetter(t[i]):l+", "+capitalizeFirstLetter(t[i]);$("#scope").html(l)}break;case"candles":if(r.hasOwnProperty("error"));else for(var o=0;o<r.candles.length-1;o++){var s=r.candles[o].open,n=r.candles[o].high,c=r.candles[o].low,b=r.candles[o].close;candles_o.push(s),candles_h.push(n),candles_l.push(c),candles_c.push(b)}break;case"active_symbols":if(r.hasOwnProperty("error"));else{$("#symbol").find("option").remove();for(var u=0;u<r.active_symbols.length-1;u++){var d=r.active_symbols[u].symbol,p=r.active_symbols[u].display_name,v=r.active_symbols[u].market,y=r.active_symbols[u].exchange_is_open;"forex"!=v&&"volidx"!=v&&"indices"!=v||"1"!=y||("R_100"==d?$("#symbol").append("<option value='"+d+"' selected>"+p+"</option>"):$("#symbol").append("<option value='"+d+"'>"+p+"</option>"))}}break;case"ohlc":if(r.hasOwnProperty("error"));else{lastReqTime=r.ohlc.epoch;var g=r.ohlc.open_time,m=(s=r.ohlc.open,n=r.ohlc.high,c=r.ohlc.low,b=r.ohlc.close,r.ohlc.close),h="N",S=$("#spot").text();if(S>0?S<m?($("#spot").css("color","#1fc7ff"),h="U"):S>m?($("#spot").css("color","#ff471a"),h="D"):($("#spot").css("color","black"),h="N"):($("#spot").css("color","black"),h="N"),$("#spot").html(m),pattern.push(h),pattern.length>100&&pattern.splice(0,1),ticker.push(m),ticker.length>135&&ticker.splice(0,1),$(".dynamicsparkline").sparkline(ticker,{type:"line",lineColor:"black",lineWidth:"1",height:"200",width:"100%",maxSpotColor:"blue",minSpotColor:"red",spotColor:"green"}),lastOpenTime?lastOpenTime!=g?(isNewBar=!0,lastOpenTime=g,candles_o.push(LastOpen),candles_h.push(LastHigh),candles_l.push(LastLow),candles_c.push(LastClose),candles_o.splice(0,1),candles_h.splice(0,1),candles_l.splice(0,1),candles_c.splice(0,1)):isNewBar=!1:(lastOpenTime=g,isNewBar=!1),LastOpen=s,LastHigh=n,LastLow=c,LastClose=b,1==$("#autotrade").is(":checked"))switch($("#indicator").val()){case"powercandle":if(1==isNewBar){var k=parseFloat(candles_o[candles_o.length-1]),f=parseFloat(candles_h[candles_h.length-1]),_=parseFloat(candles_l[candles_l.length-1]),F=parseFloat(candles_c[candles_c.length-1]);signalTrading=f>k&&_==F?"UP":k>_&&f==F?"DOWN":"NETRAL"}break;case"trendbar":if(1==isNewBar){k=parseFloat(candles_o[candles_o.length-1]),F=parseFloat(candles_c[candles_c.length-1]);var B,C,N,P=parseFloat(candles_o[candles_o.length-2]),T=parseFloat(candles_c[candles_c.length-2]),w=parseFloat(candles_o[candles_o.length-3]),O=parseFloat(candles_c[candles_c.length-3]);B=k>F?"D":k<F?"U":"N",C=P>T?"D":P<T?"U":"N",N=w>O?"D":w<O?"U":"N",signalTrading="D"==B&&"D"==C&&"U"==N?"DOWN":"U"==B&&"U"==C&&"D"==N?"UP":"NETRAL"}break;case"tickpattern":var L=$("#tickpatternup").val(),U=$("#tickpatterndown").val();signalTrading="NETRAL";var A="";if(pattern.length>=L.length)for(i=pattern.length;i>=pattern.length-L.length;i--)pattern[i]&&(A=pattern[i]+A);if(A.trim().toUpperCase()==L.trim().toUpperCase()&&(signalTrading="UP"),A="",pattern.length>=U.length)for(i=pattern.length;i>=pattern.length-U.length;i--)pattern[i]&&(A=pattern[i]+A);A.trim().toUpperCase()==U.trim().toUpperCase()&&(signalTrading="DOWN")}}break;case"buy":r.hasOwnProperty("error")?(showAlert("Buy Contract",r.error.message),OnTrade=!1,signal="NETRAL"):(contractId=r.buy.contract_id,transactionId=r.buy.transaction_id,ProposalOpenContract(),$("#contractinfo").show());break;case"sell":r.hasOwnProperty("error")?showAlert("Buy Contract",r.error.message):(Forget_all_price_proposal(),ProposalOpenContract());break;case"sell_expired":r.hasOwnProperty("error")||(Forget_all_price_proposal(),ProposalOpenContract());break;case"forget_all":break;case"proposal_open_contract":if(r.hasOwnProperty("error"));else{contractId=r.proposal_open_contract.contract_id,longCode=r.proposal_open_contract.longcode,shortCode=r.proposal_open_contract.shortCode,dateExpired=r.proposal_open_contract.date_expiry,isExpire=r.proposal_open_contract.is_expired,isSold=r.proposal_open_contract.is_sold,isAllowSell=r.proposal_open_contract.is_valid_to_sell,buyPrice=r.proposal_open_contract.buy_price,sellPrice=r.proposal_open_contract.bid_price,payout=r.proposal_open_contract.payout,entrySpot=r.proposal_open_contract.entry_spot,purchaseTime=r.proposal_open_contract.purchase_time,tradeStatus=r.proposal_open_contract.status,sellTime=r.proposal_open_contract.sell_time;var R=(parseFloat(sellPrice)-parseFloat(buyPrice)).toFixed(2);lastRefNumber!=transactionId&&0!=transactionId&&(lastRefNumber=transactionId),$("#buyprice").html(buyPrice),$("#longcode").html(longCode),$("#refnumber").html(lastRefNumber),$("#payout").html(payout),$("#entryspot").html(entrySpot),$("#purchasetime").html(FromUnix(parseFloat(purchaseTime))),$("#indicative").html(sellPrice),$("#profitloss").html(R),R<=0?($("#indicative").css("color","red"),$("#profitloss").css("color","red")):($("#indicative").css("color","green"),$("#profitloss").css("color","green")),parseFloat(sellPrice)>=parseFloat(payout)&&SellExpireContract();var E;if(E=parseFloat(R)/parseFloat(buyPrice)*100,1==isAllowSell?($("#btnsam").show(),1==$("#autotrade").is(":checked")&&(parseFloat($("#samprofit").val())>0&&parseFloat(R)>0&&parseFloat(E)>=parseFloat($("#samprofit").val())&&SellContract(),parseFloat($("#samloss").val())>0&&parseFloat(R)<0&&parseFloat(Math.abs(E))>=parseFloat($("#samloss").val())&&SellContract())):$("#btnsam").hide(),"1"==isSold){if("sold"==tradeStatus?(sellPrice=r.proposal_open_contract.sell_price,(R=(parseFloat(sellPrice)-parseFloat(buyPrice)).toFixed(2))>=0&&(tradeResult=1),R<0&&(tradeResult=0)):(R=(parseFloat(sellPrice)-parseFloat(buyPrice)).toFixed(2),"won"==tradeStatus&&(tradeResult=1),"lost"==tradeStatus&&(tradeResult=0)),Forget_all_price_proposal(),0!=transactionId&&(1==tradeResult?($("#traderesult").html("<h2>YOU WON !</h2>"),$("#traderesult").css("color","green"),$("#tblresult").append("<tr class='success'><td>"+FromUnix(parseFloat(purchaseTime))+"</td><td>"+transactionId+"</td><td>"+payout+"</td><td>"+longCode+"</td><td>"+buyPrice+"</td><td>"+FromUnix(parseFloat(sellTime))+"</td><td>"+sellPrice+"</td><td>"+R+"</td>")):($("#traderesult").html("<h2>YOU LOSS !</h2>"),$("#traderesult").css("color","red"),$("#tblresult").append("<tr class='danger'><td>"+FromUnix(parseFloat(purchaseTime))+"</td><td>"+transactionId+"</td><td>"+payout+"</td><td>"+longCode+"</td><td>"+buyPrice+"</td><td>"+FromUnix(parseFloat(sellTime))+"</td><td>"+sellPrice+"</td><td>"+R+"</td>")),transactionId="0",$("#lblPL").html((parseFloat($("#lblPL").text())+parseFloat(R)).toFixed(2)),$("#lblTO").html((parseFloat($("#lblTO").text())+parseFloat(buyPrice)).toFixed(2)),0==tradeResult))switch($("#falsesignal").val()){case"stoptrade":$("autotrade").prop("checked",!1);break;case"continue":signalTrading=lastSignal}contractId="0",OnTrade=!1,parseFloat($("#lblPL").text())>0&&parseFloat($("#takeprofit").val())>0&&parseFloat($("#lblPL").text())>=parseFloat($("#takeprofit").val())&&($("#autotrade").prop("checked",!1),signalTrading="NETRAL",showAlert("Notification","Congratulations, your Take Profit has been reached !")),parseFloat($("#lblPL").text())<0&&parseFloat($("#stoploss").val())>0&&Math.abs(parseFloat($("#lblPL").text()))>=parseFloat($("#takeprofit").val())&&($("#autotrade").prop("checked",!1),signalTrading="NETRAL",showAlert("Notification","Opps, it looks like your Stop Loss has been reached !"))}}}},ws.onopen=function(a){isLive=!0,ActiveSymbol(),Authorize(),Forget_all_spot(),Forget_all_price_proposal(),Tick_History(),1==OnTrade&&0!=contractId&&ProposalOpenContract()},ws.onclosed=function(a){},ws.onclosing=function(a){}}function clearCandle(){candles_o=[],candles_h=[],candles_l=[],candles_c=[],ticker=[],pattern=[],$("#spot").html("0.00000"),$("#spot").css("color","black")}function capitalizeFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)}function FromUnix(a){return new Date(1e3*a).toGMTString()}function ToUnix(a){return(a.getTime()-a.getMilliseconds())/1e3}function sleep(a){for(var r=(new Date).getTime(),e=0;e<1e7&&!((new Date).getTime()-r>a);e++);}token="CAyCfnECnWrSeaM",market="R_100",tf=60,curency="USD",autotrade.addEventListener("click",function(a){1==$("#autotrade").is(":checked")&&($("#tblresult tbody").empty(),$("#lblPL").html("0.00"),$("#lblTO").html("0.00"),$("#contractinfo").hide())},!1),btnconnect.addEventListener("click",function(a){$("#token").val().length>0?($("#autotrade").prop("checked",!1),token=$("#token").val().trim(),Init()):showAlert("Notification","Please insert API Token !")},!1),btnput.addEventListener("click",function(a){0==OnTrade&&(signalTrading="DOWN"),parseFloat($("#lblPL").text())>0&&parseFloat($("#takeprofit").val())>0&&parseFloat($("#lblPL").text())>=parseFloat($("#takeprofit").val())&&($("#autotrade").prop("checked",!1),signalTrading="NETRAL",showAlert("Notification","Congratulations, your Take Profit has been reached !")),parseFloat($("#lblPL").text())<0&&parseFloat($("#stoploss").val())>0&&Math.abs(parseFloat($("#lblPL").text()))>=parseFloat($("#takeprofit").val())&&($("#autotrade").prop("checked",!1),signalTrading="NETRAL",showAlert("Notification","Opps, it looks like your Stop Loss has been reached !"))},!1),btncall.addEventListener("click",function(a){0==OnTrade&&(signalTrading="UP"),parseFloat($("#lblPL").text())>0&&parseFloat($("#takeprofit").val())>0&&parseFloat($("#lblPL").text())>=parseFloat($("#takeprofit").val())&&($("#autotrade").prop("checked",!1),signalTrading="NETRAL",showAlert("Notification","Congratulations, your Take Profit has been reached !")),parseFloat($("#lblPL").text())<0&&parseFloat($("#stoploss").val())>0&&Math.abs(parseFloat($("#lblPL").text()))>=parseFloat($("#stoploss").val())&&($("#autotrade").prop("checked",!1),signalTrading="NETRAL",showAlert("Notification","Opps, it looks like your Stop Loss has been reached !"))},!1),btnsam.addEventListener("click",function(a){SellContract()},!1),symbol.addEventListener("change",function(a){var r=$("#symbol option:selected").text();$("#symbolname").html(r),market=$("#symbol").val(),Forget_all_spot(),clearCandle(),Tick_History()},!1),timeframe.addEventListener("change",function(a){tf=$("#timeframe").val(),clearCandle(),Tick_History()},!1),indicator.addEventListener("change",function(a){switch($("#indicator").val()){case"powercandle":case"trendbar":$("#parTickPattern").hide();break;case"tickpattern":$("#parTickPattern").show()}},!1),contract.addEventListener("change",function(a){switch($("#contract").val()){case"RF":$("#barrier-set").hide();break;case"HLL":case"HLH":case"TCH":case"EBW":case"EBO":case"SBW":case"GO":$("#barrier-set").show();break;case"AS":$("#barrier-set").hide()}},!1),CheckStatus(),TradeMonitor();